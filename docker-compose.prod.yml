services:
  keycloak:
    build:
      context: ./keycloak
      args:
        SPI_VERSION: 0.0.1-SNAPSHOT
        GITHUB_REPO: your-org/auth
    container_name: keycloak
    ports:
      - "8088:8080"
    environment:
      - KC_BOOTSTRAP_ADMIN_USERNAME=admin
      - KC_BOOTSTRAP_ADMIN_PASSWORD=admin
      - KC_DB=postgres
      - KC_DB_URL=jdbc:postgresql://host.docker.internal:5433/keycloak
      - KC_DB_USERNAME=postgres
      - KC_DB_PASSWORD=postgres
    command: start --optimized
